<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="shortcut icon" href="https://cdn-icons-png.flaticon.com/512/1006/1006958.png" type="image/jpg" />
  <title>Strapi Vanilla JS</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body>
  <section class="text-gray-700 body-font border-t border-gray-200">
    <div class="container px-5 py-24 mx-auto">
      <div class="flex flex-wrap w-full mb-20 flex-col items-center text-center">
        <h1 class="sm:text-3xl text-2xl font-medium title-font mb-2 text-gray-900">
          Strapi and HTML5
        </h1>
        <p class="lg:w-1/2 w-full leading-relaxed text-base">
          Build a dynamic website with Strapi and HTML5. Consume the API with
          Vanilla JS.
        </p>
      </div>
      <div class="flex flex-wrap -m-4" id="post-list"></div>
    </div>
  </section>
</body>

<footer>
  <script type="text/javascript">
    function fetchPosts() {
      const postsReq = new Request(
        "https://p7we5kcdmrpdxqg84862.cleaver.rocks/posts"
      );

      fetch(postsReq)
        .then((response) => response.json())
        .then((posts) => {
          let postList = document.getElementById("post-list");

          posts.forEach((post) => {
            postList.appendChild(createPostCard(post));
          });
        });
    }
    function createPostCard(post) {
      let card = document.createElement("div");
      card.classList.add("xl:w-1/3", "md:w-1/2", "p-4", "cursor-pointer");
      card.onclick = () => {
        window.location.replace("#");
      };

      let cardImage = document.createElement("img");
      cardImage.classList.add("w-full");
      cardImage.src = `https://p7we5kcdmrpdxqg84862.cleaver.rocks${post.thumbnail.url}`;

      let cardBody = document.createElement("div");
      cardBody.classList.add(
        "max-w-sm",
        "rounded",
        "overflow-hidden",
        "shadow-lg"
      );

      let cardContentBody = document.createElement("div");
      cardContentBody.classList.add("px-6", "py-4");

      let postTitle = document.createElement("div");
      postTitle.classList.add("font-bold", "text-xl", "mb-2");
      postTitle.innerHTML = post.title;

      let postDescription = document.createElement("p");
      postDescription.classList.add("text-gray-700", "text-base");
      postDescription.innerHTML = post.headline;

      cardContentBody.append(postTitle, postDescription);

      cardBody.append(cardImage, cardContentBody);

      card.append(cardBody);

      return card;
    }

    fetchPosts();
  </script>
</footer>

</html>